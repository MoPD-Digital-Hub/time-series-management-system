{% load static %}

<!doctype html>
<html>
  <head>
    {% include 'base/common/head.html' %}
    <style>
      body {
        background: #f3f4f6;
      }
      .preview-wrapper {
        max-width: 1200px;
        margin: 1.5rem auto;
        padding: 1.5rem;
        background: #ffffff;
        border-radius: 0.75rem;
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.12);
      }
      .preview-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 1rem;
        margin-bottom: 1rem;
      }
      .preview-meta {
        font-size: 0.85rem;
        color: #6b7280;
      }
      .preview-table {
        max-height: 70vh;
        overflow: auto;
        border-radius: 0.5rem;
        border: 1px solid #e5e7eb;
        background: #fff;
      }
      .preview-table table {
        width: 100%;
        font-size: 0.8rem;
      }
      .preview-table th,
      .preview-table td {
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <div class="preview-wrapper">
      <div class="preview-header">
        <div>
          <h2 class="text-xl font-semibold text-gray-800">Data Submission Preview</h2>
          <p class="preview-meta">
            Submission ID: {{ submission.id }} |
            Indicator: {{ submission.indicator.title_ENG }} |
            File: {{ submission.data_file.name|default:"(no file)" }}
          </p>
        </div>
        <div class="preview-meta">
          <span>Submitted at: {{ submission.submitted_at|date:"M d, Y H:i" }}</span>
        </div>
      </div>

      {% if headers and rows %}
      <div class="preview-table">
        <table class="table table-sm table-striped mb-0">
          <thead class="bg-gray-50">
            <tr>
              {% for h in headers %}
                <th class="px-2 py-2 border border-gray-200 text-xs font-semibold text-gray-700">
                  {{ h }}
                </th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for row in rows %}
              <tr>
                {% for cell in row %}
                  <td class="px-2 py-1 border border-gray-100 text-xs text-gray-800">
                    {{ cell }}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p class="text-gray-500 text-sm mt-4">No previewable rows found in this file.</p>
      {% endif %}
    </div>
  </body>
</html>


